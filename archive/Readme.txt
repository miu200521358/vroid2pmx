----------------------------------------------------------------
----------------------------------------------------------------

　「Vroid2Pmx　ローカル版」

　　ver2.01.04

　　　　　　　　　　　　　　　　　miu200521358

----------------------------------------------------------------
----------------------------------------------------------------


　この度は拙作をDLしていただき、ありがとうございます。
　お手数ですが以下をご確認のうえ、ご利用ください。

----------------------------------------------------------------


----------------------------------------------------------------
■　概要
----------------------------------------------------------------

　VRoid Studio 1.xx.xx でエクスポートされたVrmデータをPmxデータに変換します。
　
　・モデルシェーダーを使わず、ほぼVRoid Studioと同じ色味を再現
　　・基本色が指定されていた場合、テクスチャに基本色を加算した合成テクスチャを追加
　・髪の毛の艶（スフィア）作成
　　・ハイライト焼き込みテクスチャも作成
　・Aスタンス
　・左右モーフ追加
　・自動生成モーフ追加
　　　・眉：上、下、眉左、眉右、眉手前、真面目、ひそめ
　　　・目：下瞼上げ、じと目、上瞼↑、びっくり、瞳小、瞳大、なぬ！、はぅ、はちゅ目、なごみ、星目、はぁと
　　　・口：にこ、口角下げ、べー、ぺろり
　　　・他：エッジOFF
　・連動モーフ生成
　　　・目：まばたき、笑い
　　　　※これまで通りの目頂点のみ動くモーフはそれぞれ「まばたき2」「笑い2」として登録
　・ボーン
　　・MMD準標準（＋上半身3）ボーン名準拠
　　・腕捩り・手捩りのウェイトを綺麗になるよう再調整
　　・舌、目光（瞳ハイライト）追加
　・エッジ出力
　・身体剛体自動生成
　・髪スフィア（艶）生成

　物理は当ツールでは設定していないので、PmxTailorで設定してください。
　PmxTailor（v2β版以降）の「Vroid2Pmx設定インポート」ボタンで設定が簡単に導入できます。


----------------------------------------------------------------
■　配布動画
----------------------------------------------------------------

【MMD】VRoidをPmxに変換できるツールを作ってみた【ツール配布】【Vroid2Pmx ver1.00】
https://www.nicovideo.jp/watch/sm39696318
https://youtu.be/KQj7rYXCzbc

【MMD】Vroid2Pmxにモーフを沢山追加してみた【ツール配布】【Vroid2Pmx ver2.00】
https://www.nicovideo.jp/watch/sm40499240
https://youtu.be/ia0s_F3Trcc

----------------------------------------------------------------
■　同梱ファイル
----------------------------------------------------------------

　・Vroid2Pmx2.01.03.exe　　　…　ツール本体（言語別ショートカットあり）
　・Readme.txt　　　　　　　　…　リドミ
　・VMDサイジングWiki　　　　 …　Wikiへのリンク
　・コンテンツツリー用静画　　…　コンテンツツリー用静画へのリンク


----------------------------------------------------------------
■　動作環境
----------------------------------------------------------------

　Windows10/11 64bit


----------------------------------------------------------------
■　起動
----------------------------------------------------------------

・基本的にはexeをそのまま起動していただければ大丈夫です。

・ログあり版は、出力VMDファイルパスと同じところにログファイルを出力します。

・ファイル履歴は、「history.json」をexeと同じ階層に配置する事でコピー可能です。


----------------------------------------------------------------
■　使い方
----------------------------------------------------------------

 1. Vroid2Pmxを起動します

 2. 対象Vrmモデルを「対象モデル」欄に設定します。
 　　・男性モデルの場合「ANGRY（怒り）」を女性用の怒りモーフに変更してください

 3. 「ファイル」タブの「Vroid2Pmx実行」ボタンをクリックします


----------------------------------------------------------------
■　問題が起きた場合
----------------------------------------------------------------

　・解凍ファイルの文字化け
　・マカフィーでウィルスが入っていると検知されてしまう
　といった問題が起きた場合、下記ページを参照して、解決できるかご確認ください。（VMDサイジングのFAQページです）

　https://github.com/miu200521358/vmd_sizing/wiki/03.-%E5%95%8F%E9%A1%8C%E3%81%8C%E8%B5%B7%E3%81%8D%E3%81%9F%E5%A0%B4%E5%90%88

　それでも解決出来ない場合、コミュニティにてご報告ください。


----------------------------------------------------------------
■　コミュニティのご案内
----------------------------------------------------------------

　ニコニコミュニティ：https://com.nicovideo.jp/community/co5387214

　　VMDサイジングやモーションサポーターなど、自作ツールに関する諸々実験室
　　一足早くβ版を試していただくことができます。
　　サイジングがうまくいかない場合のフォローなども行えたらいいなーと思ってます。
　　一応クローズドですが自動承認なのでお気軽にどうぞ


----------------------------------------------------------------
■　使用条件 他
----------------------------------------------------------------

　《必須事項》

　　・設定したモデルの結果を公開・配布する場合は、クレジットの明記のご協力をお願い致します
　　・ニコニコ動画の場合、コンテンツツリーへツリー用静画(im10854785)を登録してください
　　　※コンテンツツリーに親登録していただける場合、クレジット記載は任意です
　　・モデルを不特定多数に配布される場合、配布告知元（動画等）にだけクレジット明記/コンテンツツリー登録をお願いいたします
　　　※該当モデルを使用した作品にクレジット記載を求める必要はありません

　《任意事項》

　　本ツールで生成したモデルに関して、元々のモデルの規約の範囲内で、以下の行為は自由に行って下さい

　　・モデルの調整・改変
　　　※配布モデルの場合、規約でモデルの改変が許可されている事を確認してください
　　・動画投稿サイト、SNS等へのモデル使用動画投稿
　　　・元々のモデルの規約で投稿先や年齢制限等の条件が規定されている場合、このツールで出力したモデルもそれに準じます
　　・モデルの不特定多数への配布
　　　※自作モデルもしくは不特定多数への配布が許可されているモデルのみ

　《禁止事項》

　　本ツールおよび生成したモデルに関して、以下の行為はご遠慮願います

　　・元々のモデル等の規約範囲外の行為
　　・完全自作発言
　　・各権利者様のご迷惑になるような行為
　　・他者の誹謗中傷目的の利用（二次元・三次元不問）

　　・下記条件は禁止事項ではありませんが、ご配慮をお願いいたします
　　　『過度な暴力・猥褻・恋愛・猟奇的・政治的・宗教的表現を含む（R-15相当以上）作品への利用』

　　　・必ず元々のモデル等の規約範囲をご確認の上、ご利用ください
　　　・また作品を公開される際には、検索避け等のご配慮をよろしくお願いいたします

　　※『営利目的の利用』は本ツールにおいては禁止事項ではありませんが、PMXEditorでは禁止事項に当たるためご注意ください

　《免責事項》

　　・自己責任でご利用ください
　　・ツール使用によって生じたいかなる問題に関して、作者は一切の責任を負いかねます


----------------------------------------------------------------
■　ソースコード・ライブラリ
----------------------------------------------------------------

このツールは、pythonで作成しており、以下ライブラリを使用・同梱しています。

・numpy (https://pypi.org/project/numpy/)
・bezier (https://pypi.org/project/bezier/)
・numpy-quaternion (https://pypi.org/project/numpy-quaternion/)
・wxPython (https://pypi.org/project/wxPython/)
・pyinstaller (https://pypi.org/project/PyInstaller/)

ソースコードは、Githubで公開しています。(MITライセンス)
ただし、著作権は放棄しておりません。

https://github.com/miu200521358/vroid2pmx

アイコンは、ヒューマンピクトグラム2.0様よりお借りしています


----------------------------------------------------------------
■　クレジット
----------------------------------------------------------------

　ツール名：　Vroid2Pmx
　作者：　miu もしくは miu200521358

　http://www.nicovideo.jp/user/2776342
　Twitter: @miu200521358
　Mail: garnet200521358@gmail.com


----------------------------------------------------------------
■　履歴
----------------------------------------------------------------

ver2.01.06 (2023/10/22)
・vrm1.0で出力した場合のエラーハンドリング追加
・マテリアル削減で出力した場合のハンドリング追加
　・マテリアルが2枚までに削減されると失敗します
　・ボーンが適切に割り当てられてない場合、PmxTailor用設定インポートJSONが作られない場合があります
・VRoid Studioベータ版でエクスポートしたvrmも警告だけで出力できるよう調整
　・vrmのモーフ名が正式版と異なるため、追加モーフの生成をスルーします
　　（VRoid Studioで設定したモーフはそのままの名前で出力します）
　・形状によってはPmxTailor用設定ファイルの出力に失敗する可能性があります

ver2.01.05 (2023/04/22)
・VRoid Studio 1.22.0 以降で、
　PmxTailor設定用エクスポート処理で材質が取れなかった時のハンドリング追加

ver2.01.04 (2023/04/08)
・VRoid Studio 1.21.0 で胸先ボーンに微量なウェイトが乗るようになってしまったので、
　PmxTailor用設定ファイル生成時の割り当て材質名の抽出優先順番を調整

ver2.01.03 (2023/03/21)
・VRoid Studio 1.20.2 で親ボーンとまったく同じ位置にあるボーンに相対位置情報が出力されなくなったのに対応

ver2.01.02 (2023/02/18)
・髪のスフィアにハイライトカラーを適用した専用スフィアを生成する処理を追加
　・既存の髪テクスチャにハイライトを焼き込んだ画像も生成はしてるので置き換え可能
・グループモーフで個別の調整をする必要がないモーフをモーフプルダウンと表示枠から削除

ver2.01.01 (2022/11/19)
・親指の角度を補正する処理を追加
・舌関連頂点がなかった場合に、舌分離処理をスキップするよう判定追加
・追加テクスチャ読み込み時にPermissionエラーが出る場合があったのを修正

ver2.01.00 (2022/07/18)
・身体剛体生成処理アルゴリズム変更
・まばたき→まばたき連動、等、連動系モーフ名と頂点モーフ名を入替
　・まばたき、笑い、ウィンク、ウィンク右、ウィンク2、ウィンク2右
・PmxTailor用設定ファイル生成処理軽量化

ver2.00.00 (2022/05/21)
　機能追加
　　・VRoid Studio 1.7.0 対応
　　・自動生成モーフ追加
　　　　・眉：上、下、眉左、眉右、眉手前、真面目、ひそめ
　　　　・目：下瞼上げ、じと目、上瞼↑、びっくり、瞳小、瞳大、なぬ！、はぅ、はちゅ目、なごみ、星目、はぁと
　　　　・口：にこ、口角下げ、べー、ぺろり
　　　　・他：エッジOFF
　　・連動モーフ生成
　　　　・目：まばたき、笑い
　　　　　※これまで通りの目頂点のみ動くモーフはそれぞれ「まばたき2」「笑い2」として登録
　　・エッジ出力追加
　　　　・UVに透明・半透明が含まれている場合　…　エッジ材質を作成
　　　　・UVに透明系が含まれていない場合　…　普通にエッジFLG=ON
　　　　・エッジOFFモーフあり
　　　　※エッジが不要な場合、「ルック＞アウトライン」からアウトラインの太さを0にしてください。
　　・PmxTailor(v2β版以降)用設定ファイル出力処理追加
　　・基本色が指定されていた場合、テクスチャに基本色を加算した合成テクスチャを追加するよう処理追加
　　　　※単純加算なので、若干色が暗めになります
　　・身体剛体
　　　　・身体の基礎剛体を肌材質の頂点をベースに計算するよう調整
　　　　・尻剛体追加（スカート貫通対策）
　　・ボーン
　　　・体幹・左右ボーンを線対称になるようボーン位置微調整
　　　・舌ボーン追加
　　　・目光（瞳ハイライト）ボーン追加
　不具合修正
　　・右腕系のローカル軸設定がネストによって崩れる場合があったのを修正
　　・右腕装飾系のAスタンス調整に失敗する頂点があったのを修正
　　・リップモーフの0.7倍処理を廃止

ver1.00.04 (2021/12/15)
・pmx生成時にバイナリ書き込みに失敗する不具合に対応

ver1.00.03 (2021/12/13)
・VRoid Studio正式版以外で出力したVRMファイルを警告のみで処理できるよう変更
　※β版出力は正式版にコンバートしてから再度出力してください
　※結果はサポート対象外です
・パーフェクトシンクモーフ対応

ver1.00.02 (2021/12/04)
　・左右モーフの表示枠追加
　・リップ以外のモーフは既存頂点モーフをリネームで対応
　・リップモーフは既存頂点モーフを「(1)」を末尾に追加した命名に変更
　　（リップモーフ0.7倍は既存同様）
　・モーフの表示枠の順番調整（リネーム混在対応）
　・牙左右モーフ追加

ver1.00.01 (2021/12/02)
　・つま先頂点がボーンと一緒に移動していたのを修正
　・両目ボーンが動かなかったのを修正
　・髪、装飾ボーンの命名タイミング修正
　・ひじのローカル軸修正

ver1.00.00　（2021/12/01）
　・一般配布開始


